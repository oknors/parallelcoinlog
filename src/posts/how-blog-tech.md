---
title: How does this tech work ?
summary: Insights about the technical choices of this blog. How do I add, remove, sort blog posts.
date: 2020-05-29
author: Marcelo Tokarnia
authorPic: https://res.cloudinary.com/marcelotokarnia/image/upload/c_thumb,g_face:center,r_max,h_150,w_150,f_auto,q_auto/v1590609457/profile/A54I1782_qa84qz.jpg
tags: Markdown,SSR,JAMstack,Tech,Automation
---

My first idea was to have both this and the previous post in a single one,
but it just outgrew my expectations (Maybe I'm not as straight to the point as I thought I would be ðŸ¤”)

Let's get to it! 

I wanted some sort of system that I could just add a markdown file for each post (simple `JAMStack` case), but I would prefer not to have to remember to always add that entry to the list of posts, and rather have that autogenerated based on the markdown files of a given folder.

Given a bit of research I bumped into this [blog post](https://dev.to/joshnuss/create-a-blog-with-markdown-sapper-50ad) highlighting exactly that architecture. Perfect! 

In short: 

1. `@jackfranklin/rollup-plugin-markdown` this rollup plugin allows you to parse markdown metadata on import, [like the following code](https://github.com/marcelotokarnia/blog/blob/94ae0c1ebb0b11da08e87cf6b61c8e4d772aaa59/src/posts/why-blog-stack.md).

```
---
title: Why a Blog ?
summary: This is my first blog post, so let's start off with the why's about this blog and the stack of choice.
date: 2020-05-27
author: Marcelo Tokarnia
authorPic: https://res.cloudinary.com/marcelotokarnia/image/upload/c_thumb,g_face:center,r_max,h_150,w_150,f_auto,q_auto/v1590609457/profile/A54I1782_qa84qz.jpg
tags: Sapper,Svelte,SSR,JAMstack
---

First of all, I'm very excited to be writing this very first blog post, which is going to be about the blog itself, so let's say it's a meta post ðŸ˜†
...
```

2. Then you can import all posts with wildcards due to this plugin `rollup-plugin-glob`, [like the following code](https://github.com/marcelotokarnia/blog/blob/94ae0c1ebb0b11da08e87cf6b61c8e4d772aaa59/src/posts/index.js)

```js
import posts from './*.md'

const parsedPosts = // some transformations, including sort by date

export default parsedPosts
```

3. On my [index.svelte (aka, blog posts list page)](https://github.com/marcelotokarnia/blog/blob/94ae0c1ebb0b11da08e87cf6b61c8e4d772aaa59/src/routes/blog/index.svelte) I can just render them order by date (one of the metadata of each .md file)

4. And due to the amazing pattern matching of urls provided by Sapper I can map a url to each specific filename slug of each markdown added with no additional code. Check the [frontend](https://github.com/marcelotokarnia/blog/blob/94ae0c1ebb0b11da08e87cf6b61c8e4d772aaa59/src/routes/blog/%5Bslug%5D.svelte) and the [backend](https://github.com/marcelotokarnia/blog/blob/94ae0c1ebb0b11da08e87cf6b61c8e4d772aaa59/src/routes/blog/%5Bslug%5D.json.ts)

So truly, whenever I want to add a blog post I just need to add a MD file to [this folder](https://github.com/marcelotokarnia/blog/tree/94ae0c1ebb0b11da08e87cf6b61c8e4d772aaa59/src/posts). Like I'm doing [in this very same commit](https://github.com/marcelotokarnia/blog/commit/d724bffe3f8274ba1e59d71e540d5e0d3504057f).

To remove it, I just have to delete it.

To reorganize it, I just have to update the date metadata.

And it is all automatically deployed by [Vercel](https://vercel.com/) with a git integration, so a simple push to master will deploy a new version to Production.

And this architecture is very easily replicable to any other project.

Sweet ðŸŽ‰